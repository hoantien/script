#!/bin/bash
name=$1
num=$2
k=1
adb shell "fpga_off.sh"
sleep 1
adb shell "fpga_on.sh"
sleep 1
adb shell "echo 00 00 02 19 00 1F 00 00 00 00 00 00 00 00 > /sys/devices/soc.0/f9923000.spi/spi_master/spi0/spi0.0/write"
sleep 1
adb shell "echo 1 > /sys/class/light_ccb/common/manual_control"
sleep 1
adb shell "echo 4 0x0000 0x00 0x90 0x03 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
sleep 1
adb shell "echo 8 0x0000 0x00 0x80 0xA2 0x00 0x00 0x02 0x02 0x02 > /sys/class/light_ccb/i2c_interface/i2c_w"
sleep 10 
exp_list=("0x40 0x42 0x0f 0x00" "0x40 0x4b 0x4c 0x00" "0x40 0x78 0x7d 0x01" "0x40 0x59 0x73 0x07" "0x00 0xca 0x9a 0x3b" "0x00 0x2f 0x68 0x59")
gain_list=("0x00 0x10" "0x01 0x10" "0x02 0x10" "0x03 0x10" "0x05 0x10" "0x07 0x10")
#exp_list=("0x59 0x68 0x2f 0x00" "0x3b 0x9a 0xca 0x00" "0x07 0x73 0x59 0x40" "0x01 0x7d 0x78 0x40" "0x00 0x4c 0x4b 0x40" "0x00 0x0f 0x42 0x40")
#gain_list=("0x10 0x07" "0x10 0x05" "0x10 0x03" "0x10 0x02" "0x10 0x01" "0x10 0x00")
#"0x10 0x07" "0x10 0x05""0x10 0x03" "0x10 0x02" "0x10 0x01" "0x10 0x00"
for i in ${!gain_list[*]}
do
	for j in ${!exp_list[*]}
	do
		adb shell "echo 4 0x0000 0x00 0x90 0x03 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		adb shell "echo 11 0x0000 0x48 0x80 0x02 0x00 0x00 0x03 0x00 0x96 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		adb shell "echo 15 0x0000 0x32 0x80 0x02 0x00 0x00 0x03 0x00 ${exp_list[$j]} 0x00 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		adb shell "echo 11 0x0000 0x30 0x80 0x02 0x00 0x00 0x03 0x00 ${gain_list[$i]} 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x40 0x00 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x40 0x00 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x48 0x80 0x04 0x00 0x00 0x03 0x00 0x96 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x04 0x00 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x04 0x00 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		adb shell "echo 15 0x0000 0x32 0x80 0x80 0x00 0x00 0x03 0x00 ${exp_list[$j]} 0x00 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		adb shell "echo 11 0x0000 0x30 0x80 0x80 0x00 0x00 0x03 0x00 ${gain_list[$i]} 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		# adb shell "echo 11 0x0000 0x48 0x80 0x08 0x00 0x00 0x03 0x00 0x96 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x08 0x00 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x08 0x00 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x00 0x01 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x00 0x01 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x48 0x80 0x10 0x00 0x00 0x03 0x00 0x96 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x10 0x00 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x10 0x00 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x00 0x02 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x00 0x02 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		adb shell "echo 11 0x0000 0x48 0x80 0x20 0x00 0x00 0x03 0x00 0x96 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		adb shell "echo 15 0x0000 0x32 0x80 0x20 0x00 0x00 0x03 0x00 ${exp_list[$j]} 0x00 0x00 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		adb shell "echo 11 0x0000 0x30 0x80 0x20 0x00 0x00 0x03 0x00 ${gain_list[$i]} 0x00 0x00 > /sys/class/light_ccb/i2c_interface/i2c_w"
		sleep 1
		# adb shell "echo 15 0x0000 0x32 0x80 0x00 0x04 0x00 0x03 0x00 0x00 0x00 0x00 0x00 ${exp_list[$j]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		# adb shell "echo 11 0x0000 0x30 0x80 0x00 0x04 0x00 0x03 0x00 0x00 0x00 ${gain_list[$i]} > /sys/class/light_ccb/i2c_interface/i2c_w"
		# sleep 1
		adb shell "cd /data; sh set_capture_ucid.sh AB"
		sleep 1
		adb shell "cd /data; sh capture_new	.sh AB $name_$k /sdcard/DCIM/rdi/ trigger"
		sleep 1
		k=$((k+1))
	done
done

